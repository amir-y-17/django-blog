<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  </head>
  <body>
    <section class="h-100 gradient-custom-2">
      <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center">
          <div class="col-lg-9 col-xl-8">
            <div class="card">
              <!-- Header Section -->
              <header class="rounded-top text-white d-flex flex-row align-items-end" style="background-color: #000; height: 200px;">
                <div class="position-absolute top-0 end-0 m-3 d-flex gap-2">
                  <a href="{% url 'users:saved_posts' %}" class="btn btn-light btn-sm" aria-label="Saved">
                  <i class="bi bi-bookmark"></i> Saved
                  </a>
                  <a href="{% url 'users:password_change' %}" class="btn btn-light btn-sm" aria-label="Change Password">
                  <i class="bi bi-lock"></i> Change Password
                  </a>
                  <a href="{% url 'blog:home' %}" class="btn btn-light btn-sm" aria-label="Home">
                  <i class="bi bi-house"></i> Home
                  </a>
                </div>
            <div class="ms-4 mt-5 d-flex flex-column align-items-center" style="width: 150px;">
                <img src="{% if user.profile_image %} {{ user.profile_image.url }} {% else %} http://bootdey.com/img/Content/avatar/avatar1.png {% endif %}"
                alt="Profile Picture" class="img-fluid img-thumbnail mt-4 mb-2 rounded-circle"
                style="width: 150px; height: 150px; object-fit: cover; z-index: 1;">
                <a href="{% url 'users:edit_profile' %}" class="btn btn-outline-light btn-sm" aria-label="Edit Profile">
                  Edit Profile
                </a>
            </div>
            <div class="ms-3" style="margin-bottom: 20px;">
              <h5>{{user.username}}</h5>
              <p class="mb-0">{{user.email}}</p>
            </div>
          </header>

          <!-- Stats Section -->
          <section class="p-4 text-black bg-body-tertiary">
            <div class="d-flex justify-content-end text-center py-1">
              <div>
                <p class="mb-1 h5">{{user.posts.count}}</p>
                <p class="small text-muted mb-0">Posts</p>
              </div>
              <div class="px-3">
                <p class="mb-1 h5">1026</p>
                <p class="small text-muted mb-0">Followers</p>
              </div>
              <div>
                <p class="mb-1 h5">478</p>
                <p class="small text-muted mb-0">Following</p>
              </div>
            </div>
          </section>

          <!-- About Section -->
          <div class="card-body p-4 text-black">
            <section class="mb-5">
              <h6 class="fw-bold">About</h6>
              <div class="p-3 bg-light rounded">
                <p class="font-italic mb-1"><strong>Full name: </strong> {{user.first_name}} {{user.last_name}}</p>
                <p class="font-italic mb-0"><strong>Date of Birth: </strong>{{user.date_of_birth|date:"Y-m-d"}}</p>
                <p class="font-italic mb-1"><strong>about me: </strong> {{user.about_me}}</p>
              </div>
            </section>

            <!-- Recent Photos Section -->
            <section>
              <div class="d-flex justify-content-between align-items-center mb-4">
                <h6 class="fw-bold">Recent Posts</h6>
                <a href="{% url 'users:my_posts_page' %}" class="text-muted small">Show all</a>
              </div>
              <div class="row g-2">
                {% for post in recent_posts %}  
                <div class="col-6">  
                  <a href="{{ post.get_absolute_url }}">  
                    <img src="{{ post.image.url }}"   
                         alt="{{ post.title }}"   
                         class="w-100 rounded-3"   
                         style="width: 398px; height: 265px; object-fit: cover;">  
                  </a>  
                </div>  
              {% endfor %}  
            </section>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
